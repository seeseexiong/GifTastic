<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GifTastic</title>
    <!-- bootstrap external link -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- my css external link -->
    <link rel="stylesheet" type="text/css" href="assets/css/style_2.css">
    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Catamaran:700" rel="stylesheet">

</head>
<body>
    <h1>Animal Gifs</h1>
        <div class="row" id="wrap">
            
            <div class="col-md-3"> 
                <form id="gif-form">
                    <label for="gif-input">Add an animal!</label>
                    <input type="text" id="gif-input"><br>
                
                    <!-- Button triggers new movie to be added -->
                    <input id="add-gif" type="submit" value="Search">
                </form>
            </div>

            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-12" id="allButtons">
                        <!-- ============================= BUTTONS goes here =============================== -->
                        <div id="buttons-view"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                <!-- ============================= NEW GIVS goes here =============================== -->
                        <div id="gifs-view"></div>
                    </div>
                </div>
            </div>
        </div> <!--closes the wrap div-->
      
        <!-- JQuery CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript">
          // Initial array of movies
          var animals = ["Dog", "Cat", "Bird", "Fish", "Pig", "Bear", "Tiger"]; 
    
          // displayGifInfo function re-renders the HTML to display the appropriate content
          function displayGifInfo() {
    
            var animal = $(this).attr("data-animal"); 
            var APIKey = "PEfiIATLPiakr520Rsy2ZAz4UaOZafG2";
            var queryURL ="https://api.giphy.com/v1/gifs/search?q="+ animal + "&api_key=" + APIKey+ "&limit=10";
    
            // Creates AJAX call for the specific gif button being clicked
            $.ajax({
              url: queryURL,
              method: "GET"
            }).then(function(response) {
        
              let mainDiv = $("<div>");

              mainDiv.append("<p>Rating: " + response.data.rating + "</p>");

              var animalImage = $("<img>");
              mainDiv.append(animalImage);
              animalImage.attr("src", response.data.images.original.url);

              $("#gifs-view").prepend(mainDiv);   //prepend puts the new output ontop of the old output
            });//<<-- closes the .then function
        }
          // Function for displaying movie data
          function renderButtons() {

            $("#buttons-view").empty();
            for (var i = 0; i < animals.length; i++) {
              var a = $("<button>");
              a.addClass("animal");
              a.attr("data-animal", animals[i]);
              a.text(animals[i]);
              $("#buttons-view").append(a);
            }
          } //closes renderButton
    
       
          $("#add-gif").on("click", function(event) {
            event.preventDefault();
            var animal = $("#gif-input").val().trim();
    
            animals.push(animal);
    
            renderButtons();
          });
    
          $(document).on("click", ".animal", displayGifInfo);
          renderButtons();
        
        </script>
        <!--BootStrap JS, Popper.js, and jQuery-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        
        <!-- my external JS file -->
        <!-- <script type="text/javascript" src="assets/javascript/main.js"></script> -->
    
</body>
</html>